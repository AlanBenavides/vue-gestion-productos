(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11f97a34"],{"25ce":function(e,t,r){"use strict";var a=r("acd0"),o=r.n(a);o.a},4136:function(e,t,r){"use strict";var a=r("5086"),o=r.n(a);o.a},"43d9":function(e,t,r){"use strict";var a=r("c9b8"),o=r.n(a);o.a},5086:function(e,t,r){},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},a434:function(e,t,r){"use strict";var a=r("23e7"),o=r("23cb"),i=r("a691"),n=r("50c4"),s=r("7b0b"),c=r("65f0"),d=r("8418"),u=r("1dde"),l=r("ae40"),p=u("splice"),m=l("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,_=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var r,a,u,l,p,m,h=s(this),b=n(h.length),x=o(e,b),C=arguments.length;if(0===C?r=a=0:1===C?(r=0,a=b-x):(r=C-2,a=f(v(i(t),0),b-x)),b+r-a>_)throw TypeError(g);for(u=c(h,a),l=0;l<a;l++)p=x+l,p in h&&d(u,l,h[p]);if(u.length=a,r<a){for(l=x;l<b-a;l++)p=l+a,m=l+r,p in h?h[m]=h[p]:delete h[m];for(l=b;l>b-a+r;l--)delete h[l-1]}else if(r>a)for(l=b-a;l>x;l--)p=l+a-1,m=l+r-1,p in h?h[m]=h[p]:delete h[m];for(l=0;l<r;l++)h[l+x]=arguments[l+2];return h.length=b-a+r,u}})},acd0:function(e,t,r){},c9b8:function(e,t,r){},dfc4:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"registro"},[r("h1",{staticClass:"registro_tittle"},[e._v("Registro de Producto")]),r("div",{staticClass:"registro_container"},[r("FormImage",{on:{sendimages:function(t){return e.passImages(t)}}}),r("Formulario",{staticClass:"registro_form",attrs:{images:e.images}})],1)])},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"formulario"},[r("h2",{staticClass:"formulario_tittle"},[e._v("Datos del producto:")]),r("form",{staticClass:"formulario_form",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Nombre Producto:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.nombre_prod,expression:"producto.nombre_prod"}],style:e.$v.producto.nombre_prod.$invalid?"border:1px solid red ":"border:1px solid green ",attrs:{type:"text",required:""},domProps:{value:e.producto.nombre_prod},on:{input:function(t){t.target.composing||e.$set(e.producto,"nombre_prod",t.target.value)}}})]),e.$v.producto.nombre_prod.alpha?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" No se aceptan caracteres especiales. ")]),e.$v.producto.nombre_prod.minLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Debe tener una longitud no menor a "+e._s(e.$v.producto.nombre_prod.$params.minLength.min)+". ")]),e.$v.producto.nombre_prod.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.nombre_prod.maxLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Nombre muy largo maximo "+e._s(e.$v.producto.nombre_prod.$params.maxLength.max)+" caracteres. ")])]),r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Descripción:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.producto.descripcion,expression:"producto.descripcion"}],style:e.$v.producto.descripcion.$invalid?"border:1px solid red ":"border:1px solid green ",attrs:{cols:"50",rows:"10",maxlength:"1000"},domProps:{value:e.producto.descripcion},on:{input:function(t){t.target.composing||e.$set(e.producto,"descripcion",t.target.value)}}})]),r("div",{staticClass:"formulario_check-error1"},[e._v(" "+e._s(e.producto.descripcion.length+"/1000")+" caracteres. ")]),e.$v.producto.descripcion.maxLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Descripcion muy larga maximo "+e._s(e.$v.producto.descripcion.$params.maxLength.max)+" caracteres. ")]),e.$v.producto.descripcion.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")])]),r("div",[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Categoría:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.categoria,expression:"producto.categoria"}],style:e.$v.producto.categoria.$invalid?"border:1px solid red ":"border:1px solid green ",attrs:{list:"categorias"},domProps:{value:e.producto.categoria},on:{input:function(t){t.target.composing||e.$set(e.producto,"categoria",t.target.value)}}})]),e.$v.producto.categoria.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.categoria.alpha3?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" No se aceptan caracteres especiales. ")]),e._m(0)]),r("div",{staticClass:"formulario_group"},[r("label",[e.producto.peso||e.producto.cantidad?e._e():r("p",{staticClass:"formulario_name"},[e._v(" Precio (Bs.): ")]),e.producto.peso?r("p",{staticClass:"formulario_name"},[e._v(" Precio por "+e._s(e.producto.unidad_med.slice(0,e.producto.unidad_med.length-1))+" "),r("span",[e._v("(Bs):")])]):e._e(),e.producto.cantidad?r("p",{staticClass:"formulario_name"},[e._v(" Precio por unidad "),r("span",[e._v("(Bs):")])]):e._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.precio_unid,expression:"producto.precio_unid"}],style:e.$v.producto.precio_unid.$invalid?"border:1px solid red ":"border:1px solid green ",attrs:{type:"text"},domProps:{value:e.producto.precio_unid},on:{input:function(t){t.target.composing||e.$set(e.producto,"precio_unid",t.target.value)}}})]),e.$v.producto.precio_unid.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.precio_unid.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo invalido (0.10-10000). ")]),e.$v.producto.precio_unid.validate_decimales?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Maximo 2 decimales! ")]),e.$v.producto.precio_unid.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico. ")])]),r("fieldset",[r("legend",{staticClass:"formulario_name"},[e._v("Cantidad:")]),r("div",{staticClass:"formulario_group"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad,expression:"producto.unidad"}],attrs:{type:"radio",id:"precio_unidades"},domProps:{checked:e._q(e.producto.unidad,null)},on:{click:function(t){return e.selectCantidad(!1)},change:function(t){return e.$set(e.producto,"unidad",null)}}}),r("span",{staticClass:"formulario_name formulario_name-span"},[e._v("Unidades")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.cantidad,expression:"producto.cantidad"}],attrs:{type:"text",disabled:e.disabled,required:!e.disabled},domProps:{value:e.producto.cantidad},on:{input:function(t){t.target.composing||e.$set(e.producto,"cantidad",t.target.value)}}}),e.$v.producto.cantidad.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese valores enteros entre (1-1000). ")]),e.$v.producto.cantidad.integer?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Solo se aceptan valores enteros. ")]),e.$v.producto.cantidad.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico ")])]),r("div",{staticClass:"formulario_group"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad,expression:"producto.unidad"}],attrs:{type:"radio",value:"peso",id:"precio_peso"},domProps:{checked:e._q(e.producto.unidad,"peso")},on:{click:function(t){return e.selectCantidad(!0)},change:function(t){return e.$set(e.producto,"unidad","peso")}}}),r("span",{staticClass:"formulario_name formulario_name-span"},[e._v("Peso")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.peso,expression:"producto.peso"}],staticClass:"formulario_peso",attrs:{type:"text",step:"0.25",disabled:!e.disabled,required:e.disabled},domProps:{value:e.producto.peso},on:{input:function(t){t.target.composing||e.$set(e.producto,"peso",t.target.value)}}}),r("select",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad_med,expression:"producto.unidad_med"}],attrs:{required:e.disabled,disabled:!e.disabled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.producto,"unidad_med",t.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:"",value:""}},[e._v("Elige una opción")]),r("option",{attrs:{value:"Kilogramos"}},[e._v("Kilogramos")]),r("option",{attrs:{value:"Libras"}},[e._v("Libras")]),r("option",{attrs:{value:"Litros"}},[e._v("Litros")]),r("option",{attrs:{value:"Galones"}},[e._v("Galones")]),r("option",{attrs:{value:"Onzas"}},[e._v("Onzas")])]),e.$v.producto.peso.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese valores entre (0.10-100). ")]),e.$v.producto.peso.validate_decimales?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Maximo 2 decimales! ")]),e.$v.producto.peso.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico. ")])])]),r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Fecha de vencimiento del producto:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.fecha_venc,expression:"producto.fecha_venc"}],attrs:{type:"date",value:"DD/MM/AA",onkeydown:"return false"},domProps:{value:e.producto.fecha_venc},on:{input:function(t){t.target.composing||e.$set(e.producto,"fecha_venc",t.target.value)}}})]),e.$v.producto.fecha_venc.validate_date?e._e():r("div",{staticClass:"formulario_check-error-center"},[e._v(" fecha invalida ")])]),r("button",{staticClass:"formulario_button",attrs:{disabled:e.$v.producto.$invalid}},[e._v(" Confirmar ")])]),e._v(" "+e._s(e.producto)+" ")])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("datalist",{attrs:{id:"categorias"}},[r("option",{attrs:{value:"Farmacia"}}),r("option",{attrs:{value:"Electronicos"}}),r("option",{attrs:{value:"Ropa"}}),r("option",{attrs:{value:"Alimentos"}}),r("option",{attrs:{value:"Entretenimiento"}})])}],s=(r("4160"),r("c975"),r("fb6a"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),c=r("b5ae"),d=c["helpers"].regex("alpha",/^[0-9a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*['a-zA-ZÀ-ÿ\u00f1\u00d1]+$/),u=c["helpers"].regex("alpha1",/^[0-9,.\s]*$/),l=c["helpers"].regex("alpha3",/^[a-zA-Z\s]*$/),p=function(e){var t=new Date,r=t.getDate(),a=t.getMonth()+1,o=t.getFullYear(),i=parseInt(e.slice(0,4)),n=parseInt(e.slice(5,7)),s=parseInt(e.slice(8,10));return!c["helpers"].req(e)||!(i<o)&!(i==o&&n<a)&!(o==i&&a==n&&s<r)},m=function(e){var t=String(e);if(t.indexOf(".")>0){var r=t.split("."),a=String(r[1]);return!c["helpers"].req(e)||!(a.length>2)}return!0},v={name:"Formulario",data:function(){return{disabled:!1,producto:{nombre_prod:null,descripcion:"",categoria:null,precio_unid:null,unidad:null,cantidad:null,peso:null,unidad_med:null,fecha_venc:""}}},props:["images"],validations:{producto:{nombre_prod:{required:c["required"],minLength:Object(c["minLength"])(2),maxLength:Object(c["maxLength"])(30),alpha:d},descripcion:{required:c["required"],maxLength:Object(c["maxLength"])(1e3)},categoria:{required:c["required"],alpha3:l},precio_unid:{required:c["required"],between:Object(c["between"])(.1,1e4),validate_decimales:m,alpha2:u},cantidad:{between:Object(c["between"])(1,1e3),integer:c["integer"],alpha2:u},peso:{between:Object(c["between"])(.1,100),validate_decimales:m,alpha2:u},fecha_venc:{validate_date:p}}},methods:{selectCantidad:function(e){this.disabled=e,this.disabled?(this.producto.cantidad=null,this.producto.peso="",this.producto.unidad_med=""):(this.producto.peso=null,this.producto.unidad_med=null,this.producto.cantidad="")},submitForm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.producto.$invalid){t.next=14;break}if(0!=e.images.length){t.next=6;break}alert("Registra por lo menos una imagen"),t.next=12;break;case 6:return t.next=8,e.sendDataProduct();case 8:return r=t.sent,t.next=11,e.sendImage(r);case 11:alert("Producto creado exitosamente");case 12:t.next=15;break;case 14:alert("Rellene todos los datos correctamente");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},sendDataProduct:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("products",{nombre_prod:e.producto.nombre_prod,descripcion:e.producto.descripcion,categoria:e.producto.categoria,precio_unid:e.producto.precio_unid,cantidad:e.producto.cantidad?null:e.producto.cantidad,peso:e.producto.peso?e.producto.peso:null,unidad_med:e.producto.unidad_med?e.producto.unidad_med:null,fecha_venc:""==e.producto.fecha_venc?null:e.producto.fecha_venc});case 3:return r=t.sent,t.abrupt("return",r.data[0].cod_prod);case 7:throw t.prev=7,t.t0=t["catch"](0),new Error("El nombre del producto esta repetido");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},sendImage:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.images.forEach(function(){var r=Object(s["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.post("images",{cod_prod:e,imagen:a});case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 1:case"end":return r.stop()}}),r)})))()}}},f=v,_=(r("4136"),r("2877")),g=Object(_["a"])(f,i,n,!1,null,null,null),h=g.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"imagenes"},[r("h2",{staticClass:"formulario_tittle"},[e._v("Fotos del producto:")]),r("input",{ref:"files",staticClass:"images_input",attrs:{type:"file",id:"files",accept:"image/*",multiple:""},on:{change:function(t){return e.handleFilesUpload()}}}),r("div",{staticClass:"imagenes_container"},[e._l(e.files,(function(t,a){return r("div",{key:a,class:"imagenes_list "+(0==a?"imagenes_list-firt":"")},[r("img",{ref:"image"+parseInt(a),refInFor:!0,staticClass:"imagenes_preview",attrs:{height:0==a?"360px":"200px"}}),r("span",{staticClass:"imagenes_remove",on:{click:function(t){return e.removeFile(a,2)}}},[e._v("X")])])})),0==e.files.length?r("div",{staticClass:"imagenes_list-firt"}):e._e(),e._l(3,(function(t,a){return[e.image64.length<=a+1?r("div",{key:"image"+a,staticClass:"images_container-button"},[r("button",{staticClass:"add_imagenes",on:{click:function(t){return e.addFiles()}}},[r("span",{staticClass:"images_container-button"},[e._v("+")])])]):e._e()]}))],2),e.$v.files.required?e._e():r("span",{staticClass:"formulario_check-error"},[e._v("Faltan fotografias")]),e.$v.files.maxLength?e._e():r("span",{staticClass:"formulario_check-error"},[e._v("No se aceptan mas de 4 imagenes")])])},x=[],C=(r("a434"),r("b0c0"),r("53ca")),$={name:"FormImage",data:function(){return{files:[],image64:[]}},validations:{files:{required:c["required"],maxLength:Object(c["maxLength"])(4)}},methods:{addFiles:function(){this.$refs.files.click()},handleFilesUpload:function(){for(var e=this,t=this.$refs.files.files,r=t.length,a=function(){var r=t[o];if(/\.(jpe?g|png)$/i.test(r.name)){for(i=0;i<e.files.length;i++)if(r.name==e.files[i].name)return alert(r.name+" ya fue subido"),e.removeFile(e.files.length+o,1),{v:void 0};if(r.size>1048576)return alert(r.name+" es muy pesado (> 1MB)"),e.removeFile(e.files.length+o,1),{v:void 0};var a=new FileReader;a.readAsDataURL(r),a.onload=function(t){var a=new Image;a.onload=function(){return a.width<640||a.width>1366?(alert("El ancho de "+r.name+" debe estar entre 640px y 1366px"),void e.removeFile(e.files.length+o,1)):a.height<360||a.height>768?(alert("El alto de "+r.name+" debe estar entre 360px y 768px"),void e.removeFile(e.files.length+o,1)):e.files.length>=4?(alert("No puede ingresar más de 4 imagenes"),void e.removeFile(e.files.length+o,1)):(e.createBase64Image(r),e.files.push(r),e.getImagePreviews(),void e.$emit("sendimages",e.image64))},a.src=t.target.result}}else alert(r.name+" no es un archivo jpg o png")},o=0;o<r;o++){var i,n=a();if("object"===Object(C["a"])(n))return n.v}},getImagePreviews:function(){for(var e=this,t=function(t){if(/\.(jpe?g|png)$/i.test(e.files[t].name)){var r=new FileReader;r.addEventListener("load",function(){this.$refs["image"+parseInt(t)][0].src=r.result}.bind(e),!1),r.readAsDataURL(e.files[t])}},r=0;r<this.files.length;r++)t(r)},removeFile:function(e,t){this.files.splice(e,1),this.getImagePreviews(),2==t&&this.image64.splice(e,1)},createBase64Image:function(e){var t=this,r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t.image64.push(e.target.result)}}}},w=$,k=(r("43d9"),Object(_["a"])(w,b,x,!1,null,"28130a60",null)),y=k.exports,F={name:"RegistroProducto",components:{Formulario:h,FormImage:y},data:function(){return{images:[]}},methods:{passImages:function(e){this.images=e}}},q=F,I=(r("25ce"),Object(_["a"])(q,a,o,!1,null,"5f4dfb37",null));t["default"]=I.exports}}]);
//# sourceMappingURL=chunk-11f97a34.eb4171d4.js.map