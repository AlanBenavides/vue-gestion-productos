(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5692fb36"],{"0550":function(e,t,r){"use strict";var a=r("6c11"),o=r.n(a);o.a},3599:function(e,t,r){"use strict";var a=r("3852"),o=r.n(a);o.a},3852:function(e,t,r){},"53ca":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("e01a"),r("d28b"),r("d3b7"),r("3ca3"),r("ddb0");function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},"6c11":function(e,t,r){},"6dc2":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"editar"},[r("h1",{staticClass:"edicion_tittle"},[e._v("Editar Producto")]),r("div",{staticClass:"edicion_container"},[r("EditImages",{on:{sendimages:function(t){return e.passImages(t)}}}),r("EditForm",{staticClass:"edicion_form",attrs:{images:e.images}})],1)])},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"formulario"},[r("h2",{staticClass:"formulario_tittle"},[e._v("Datos del producto:")]),r("form",{staticClass:"formulario_form",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Nombre Producto:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.nombre_prod,expression:"producto.nombre_prod"}],class:e.$v.producto.nombre_prod.$invalid?"formulario_check-input-error ":"formulario_check-input ",attrs:{type:"text",required:""},domProps:{value:e.producto.nombre_prod},on:{input:function(t){t.target.composing||e.$set(e.producto,"nombre_prod",t.target.value)}}})]),e.$v.producto.nombre_prod.alpha1?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" No se aceptan caracteres especiales. ")]),e.$v.producto.nombre_prod.minLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Debe tener una longitud no menor a "+e._s(e.$v.producto.nombre_prod.$params.minLength.min)+". ")]),e.$v.producto.nombre_prod.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.nombre_prod.maxLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Nombre muy largo maximo "+e._s(e.$v.producto.nombre_prod.$params.maxLength.max)+" caracteres. ")])]),r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Descripción:")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.producto.descripcion,expression:"producto.descripcion"}],class:e.$v.producto.descripcion.$invalid?"formulario_check-input-error ":"formulario_check-input ",attrs:{cols:"50",rows:"10",maxlength:"1000"},domProps:{value:e.producto.descripcion},on:{input:function(t){t.target.composing||e.$set(e.producto,"descripcion",t.target.value)}}})]),r("div",{staticClass:"formulario_check-count"},[e._v(" "+e._s(e.producto.descripcion.length+"/1000")+" caracteres. ")]),e.$v.producto.descripcion.maxLength?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Descripcion muy larga maximo "+e._s(e.$v.producto.descripcion.$params.maxLength.max)+" caracteres. ")]),e.$v.producto.descripcion.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")])]),r("div",[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Categoría:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.categoria,expression:"producto.categoria"}],class:e.$v.producto.categoria.$invalid?"formulario_check-input-error ":"formulario_check-input ",attrs:{list:"categorias"},domProps:{value:e.producto.categoria},on:{input:function(t){t.target.composing||e.$set(e.producto,"categoria",t.target.value)}}})]),e.$v.producto.categoria.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.categoria.alpha3?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" No se aceptan caracteres especiales. ")]),e._m(0)]),r("div",{staticClass:"formulario_group"},[r("label",[e.producto.peso||e.producto.cantidad?e._e():r("p",{staticClass:"formulario_name"},[e._v(" Precio (Bs.): ")]),e.producto.peso?r("p",{staticClass:"formulario_name"},[e._v(" Precio por "+e._s(e.producto.unidad_med.slice(0,e.producto.unidad_med.length-1))+" "),r("span",[e._v("(Bs):")])]):e._e(),e.producto.cantidad?r("p",{staticClass:"formulario_name"},[e._v(" Precio por unidad "),r("span",[e._v("(Bs):")])]):e._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.precio_unid,expression:"producto.precio_unid"}],class:e.$v.producto.precio_unid.$invalid?"formulario_check-input-error ":"formulario_check-input ",attrs:{type:"text"},domProps:{value:e.producto.precio_unid},on:{input:function(t){t.target.composing||e.$set(e.producto,"precio_unid",t.target.value)}}})]),e.$v.producto.precio_unid.required?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo requerido. ")]),e.$v.producto.precio_unid.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Campo invalido (0.10-10000). ")]),e.$v.producto.precio_unid.validate_decimales?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Maximo 2 decimales! ")]),e.$v.producto.precio_unid.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico. ")])]),r("fieldset",[r("legend",{staticClass:"formulario_name"},[e._v("Cantidad:")]),r("div",{staticClass:"formulario_group"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad,expression:"producto.unidad"}],class:e.disabled?" ":"checked",attrs:{type:"radio",id:"precio_unidades"},domProps:{value:!0,checked:e._q(e.producto.unidad,!0)},on:{click:function(t){return e.selectCantidad(!1)},change:function(t){return e.$set(e.producto,"unidad",!0)}}}),r("span",{staticClass:"formulario_name formulario_name-span"},[e._v("Unidades")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.cantidad,expression:"producto.cantidad"}],attrs:{type:"text",disabled:e.disabled,required:!e.disabled},domProps:{value:e.producto.cantidad},on:{input:function(t){t.target.composing||e.$set(e.producto,"cantidad",t.target.value)}}}),e.$v.producto.cantidad.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese valores enteros entre (1-1000). ")]),e.$v.producto.cantidad.integer?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Solo se aceptan valores enteros. ")]),e.$v.producto.cantidad.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico ")])]),r("div",{staticClass:"formulario_group"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad,expression:"producto.unidad"}],class:e.disabled?"checked":" ",attrs:{type:"radio",value:"peso",id:"precio_peso"},domProps:{checked:e._q(e.producto.unidad,"peso")},on:{click:function(t){return e.selectCantidad(!0)},change:function(t){return e.$set(e.producto,"unidad","peso")}}}),r("span",{staticClass:"formulario_name formulario_name-span"},[e._v("Peso")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.peso,expression:"producto.peso"}],staticClass:"formulario_peso",attrs:{type:"text",step:"0.25",disabled:!e.disabled,required:e.disabled},domProps:{value:e.producto.peso},on:{input:function(t){t.target.composing||e.$set(e.producto,"peso",t.target.value)}}}),r("select",{directives:[{name:"model",rawName:"v-model",value:e.producto.unidad_med,expression:"producto.unidad_med"}],attrs:{required:e.disabled,disabled:!e.disabled},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.producto,"unidad_med",t.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:"",value:""}},[e._v("Elige una opción")]),r("option",{attrs:{value:"Kilogramos"}},[e._v("Kilogramos")]),r("option",{attrs:{value:"Libras"}},[e._v("Libras")]),r("option",{attrs:{value:"Litros"}},[e._v("Litros")]),r("option",{attrs:{value:"Galones"}},[e._v("Galones")]),r("option",{attrs:{value:"Onzas"}},[e._v("Onzas")])]),e.$v.producto.peso.between?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese valores entre (0.10-100). ")]),e.$v.producto.peso.validate_decimales?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Maximo 2 decimales! ")]),e.$v.producto.peso.alpha2?e._e():r("div",{staticClass:"formulario_check-error"},[e._v(" Ingrese un valor numérico. ")])])]),r("div",{staticClass:"formulario_group"},[r("label",[r("div",{staticClass:"formulario_name"},[e._v("Fecha de vencimiento del producto:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.producto.fecha_venc,expression:"producto.fecha_venc"}],attrs:{type:"date",value:"DD/MM/AA",onkeydown:"return false"},domProps:{value:e.producto.fecha_venc},on:{input:function(t){t.target.composing||e.$set(e.producto,"fecha_venc",t.target.value)}}})]),e.$v.producto.fecha_venc.validate_date?e._e():r("div",{staticClass:"formulario_check-error-center"},[e._v(" fecha invalida ")])]),r("button",{staticClass:"formulario_button",attrs:{disabled:e.$v.producto.$invalid}},[e._v(" Confirmar ")])])])},n=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("datalist",{attrs:{id:"categorias"}},[r("option",{attrs:{value:"Farmacia"}}),r("option",{attrs:{value:"Electronicos"}}),r("option",{attrs:{value:"Ropa"}}),r("option",{attrs:{value:"Alimentos"}}),r("option",{attrs:{value:"Entretenimiento"}})])}],c=(r("99af"),r("c975"),r("fb6a"),r("ac1f"),r("1276"),r("96cf"),r("1da1")),s=r("b5ae"),d=s["helpers"].regex("alpha1",/^[a-zA-Z0-9ñ+áéíóúÁÉÍÓÚ'\s]*$/),u=s["helpers"].regex("alpha1",/^[0-9,.\s]*$/),l=s["helpers"].regex("alpha3",/^[a-zA-Z\s]*$/),p=function(e){var t=new Date,r=t.getDate(),a=t.getMonth()+1,o=t.getFullYear(),i=parseInt(e.slice(0,4)),n=parseInt(e.slice(5,7)),c=parseInt(e.slice(8,10));return!s["helpers"].req(e)||!(i<o)&!(i==o&&n<a)&!(o==i&&a==n&&c<r)},m=function(e){var t=String(e);if(t.indexOf(".")>0){var r=t.split("."),a=String(r[1]);return!s["helpers"].req(e)||!(a.length>2)}return!0},v={name:"EditForm",data:function(){return{disabled:!1,producto:{nombre_prod:null,descripcion:"",categoria:null,precio_unid:null,unidad:null,cantidad:null,peso:null,unidad_med:null,fecha_venc:""}}},props:["images"],validations:{producto:{nombre_prod:{required:s["required"],minLength:Object(s["minLength"])(2),maxLength:Object(s["maxLength"])(30),alpha1:d},descripcion:{required:s["required"],maxLength:Object(s["maxLength"])(1e3)},categoria:{required:s["required"],alpha3:l},precio_unid:{required:s["required"],between:Object(s["between"])(.1,1e4),validate_decimales:m,alpha2:u},cantidad:{between:Object(s["between"])(1,1e3),integer:s["integer"],alpha2:u},peso:{between:Object(s["between"])(.1,100),validate_decimales:m,alpha2:u},fecha_venc:{validate_date:p}}},methods:{selectCantidad:function(e){this.disabled=e,this.disabled?this.producto.cantidad=null:(this.producto.peso=null,this.producto.unidad_med=null)},submitForm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.producto.$invalid){t.next=14;break}if(0!=e.images.length){t.next=6;break}alert("Registra por lo menos una imagen"),t.next=12;break;case 6:return r=e.$route.params.id,t.next=9,e.sendDataProduct(r);case 9:return t.next=11,e.sendImage(r);case 11:alert("Producto actualizado exitosamente");case 12:t.next=15;break;case 14:alert("Rellene todos los datos correctamente");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](0),alert(t.t0);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))()},sendDataProduct:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$http.put("products/".concat(e),{nombre_prod:t.producto.nombre_prod,descripcion:t.producto.descripcion,categoria:t.producto.categoria,precio_unid:t.producto.precio_unid,cantidad:t.producto.cantidad?t.producto.cantidad:null,peso:t.producto.peso?t.producto.peso:null,unidad_med:t.producto.unidad_med?t.producto.unidad_med:null,fecha_venc:""==t.producto.fecha_venc?null:t.producto.fecha_venc});case 3:r.next=8;break;case 5:throw r.prev=5,r.t0=r["catch"](0),new Error("El nombre del producto esta repetido");case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},sendImage:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.put("images/".concat(e),{imagen:t.images});case 2:case"end":return r.stop()}}),r)})))()},transformDate1:function(e){var t=new Date(e);return"".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()+1)}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("products/".concat(this.$route.params.id));case 2:t=e.sent.data.datos[0],this.producto.nombre_prod=t.nombre_prod,this.producto.descripcion=t.descripcion,this.producto.categoria=t.nombre_cat,this.producto.precio_unid=t.precio_unid,this.producto.unidad=t.unidad,this.producto.cantidad=t.cantidad,this.producto.peso=t.peso,this.producto.unidad_med=t.unidad_med,null!=t.fecha_venc&&(this.producto.fecha_venc=this.transformDate1(t.fecha_venc)),t.peso&&this.selectCantidad(!0);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},f=v,_=(r("0550"),r("2877")),h=Object(_["a"])(f,i,n,!1,null,null,null),g=h.exports,b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"imagenes"},[r("h2",{staticClass:"formulario_tittle"},[e._v("Fotos del producto:")]),r("input",{ref:"files",staticClass:"images_input",attrs:{type:"file",id:"files",accept:"image/*",multiple:""},on:{change:function(t){return e.handleFilesUpload()}}}),r("div",{staticClass:"imagenes_container"},[e._l(e.image64,(function(t,a){return r("div",{key:a,class:"imagenes_list "+(0==a?"imagenes_list-first":"")},[r("img",{ref:"image"+parseInt(a),refInFor:!0,staticClass:"imagenes_preview",attrs:{src:e.image64.slice(a,a+1),height:0==a?"360px":"200px"}}),r("span",{staticClass:"imagenes_remove",on:{click:function(t){return e.removeFile(a,3)}}},[e._v("X")])])})),e._l(3,(function(t,a){return[e.image64.length<=a+1?r("div",{key:"image"+a,staticClass:"images_container-button"},[r("button",{staticClass:"add_imagenes",on:{click:function(t){return e.addFiles()}}},[r("span",{staticClass:"images_container-button"},[e._v("+")])])]):e._e()]}))],2),e.$v.image64.required?e._e():r("span",{staticClass:"formulario_check-error"},[e._v("Faltan fotografias")]),e.$v.image64.maxLength?e._e():r("span",{staticClass:"formulario_check-error"},[e._v("No se aceptan mas de 4 imagenes")])])},x=[],C=(r("d81d"),r("a434"),r("b0c0"),r("53ca")),$={name:"EditImages",data:function(){return{files:[],image64:[]}},validations:{image64:{required:s["required"],maxLength:Object(s["maxLength"])(4)},files:{maxLength:Object(s["maxLength"])(4)}},methods:{addFiles:function(){this.$refs.files.click()},handleFilesUpload:function(){for(var e=this,t=this.$refs.files.files,r=t.length,a=function(){var r=t[o];if(/\.(jpe?g|png)$/i.test(r.name)){if(r.size>1048576)return alert(r.name+" es muy pesado (> 1MB)"),{v:void 0};var a=new FileReader;a.readAsDataURL(r),a.onload=function(t){var a=new Image;a.onload=function(){a.width<640||a.width>1366?alert("El ancho de "+r.name+" debe estar entre 640px y 1366px"):a.height<360||a.height>768?alert("El alto de "+r.name+" debe estar entre 360px y 768px"):(e.createBase64Image(r),e.$emit("sendimages",e.image64))},a.src=t.target.result}}else alert(r.name+" no es un archivo jpg o png")},o=0;o<r;o++){var i=a();if("object"===Object(C["a"])(i))return i.v}},removeFile:function(e,t){3==t&&this.image64.splice(e,1)},createBase64Image:function(e){var t=this,r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t.image64.push(e.target.result)}}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/images/".concat(this.$route.params.id,"?cantidad=1"));case 2:t=e.sent.data.datos,this.image64=t,this.image64=this.image64.map((function(e){return"data:image/[jpg/png];base64,".concat(e.imagen)})),this.$emit("sendimages",this.image64);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},w=$,k=(r("3599"),Object(_["a"])(w,b,x,!1,null,"495ac77c",null)),y=k.exports,q={name:"EditarProducto",components:{EditForm:g,EditImages:y},data:function(){return{images:[]}},methods:{passImages:function(e){this.images=e}}},E=q,L=(r("f82d"),Object(_["a"])(E,a,o,!1,null,"171a7725",null));t["default"]=L.exports},"99af":function(e,t,r){"use strict";var a=r("23e7"),o=r("d039"),i=r("e8b5"),n=r("861d"),c=r("7b0b"),s=r("50c4"),d=r("8418"),u=r("65f0"),l=r("1dde"),p=r("b622"),m=r("2d00"),v=p("isConcatSpreadable"),f=9007199254740991,_="Maximum allowed index exceeded",h=m>=51||!o((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=l("concat"),b=function(e){if(!n(e))return!1;var t=e[v];return void 0!==t?!!t:i(e)},x=!h||!g;a({target:"Array",proto:!0,forced:x},{concat:function(e){var t,r,a,o,i,n=c(this),l=u(n,0),p=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?n:arguments[t],b(i)){if(o=s(i.length),p+o>f)throw TypeError(_);for(r=0;r<o;r++,p++)r in i&&d(l,p,i[r])}else{if(p>=f)throw TypeError(_);d(l,p++,i)}return l.length=p,l}})},a434:function(e,t,r){"use strict";var a=r("23e7"),o=r("23cb"),i=r("a691"),n=r("50c4"),c=r("7b0b"),s=r("65f0"),d=r("8418"),u=r("1dde"),l=r("ae40"),p=u("splice"),m=l("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,f=Math.min,_=9007199254740991,h="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var r,a,u,l,p,m,g=c(this),b=n(g.length),x=o(e,b),C=arguments.length;if(0===C?r=a=0:1===C?(r=0,a=b-x):(r=C-2,a=f(v(i(t),0),b-x)),b+r-a>_)throw TypeError(h);for(u=s(g,a),l=0;l<a;l++)p=x+l,p in g&&d(u,l,g[p]);if(u.length=a,r<a){for(l=x;l<b-a;l++)p=l+a,m=l+r,p in g?g[m]=g[p]:delete g[m];for(l=b;l>b-a+r;l--)delete g[l-1]}else if(r>a)for(l=b-a;l>x;l--)p=l+a-1,m=l+r-1,p in g?g[m]=g[p]:delete g[m];for(l=0;l<r;l++)g[l+x]=arguments[l+2];return g.length=b-a+r,u}})},d81d:function(e,t,r){"use strict";var a=r("23e7"),o=r("b727").map,i=r("1dde"),n=r("ae40"),c=i("map"),s=n("map");a({target:"Array",proto:!0,forced:!c||!s},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},e119:function(e,t,r){},f82d:function(e,t,r){"use strict";var a=r("e119"),o=r.n(a);o.a}}]);
//# sourceMappingURL=chunk-5692fb36.c56239b9.js.map