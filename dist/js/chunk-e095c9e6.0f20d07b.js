(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e095c9e6"],{"0716":function(t,e,r){},"13d5":function(t,e,r){"use strict";var n=r("23e7"),o=r("d58f").left,a=r("a640"),i=r("ae40"),c=a("reduce"),s=i("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return o(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"20d9":function(t,e,r){},"9e4a":function(t,e,r){"use strict";var n=r("20d9"),o=r.n(n);o.a},abf9:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("h1",{staticClass:"admin_productos-title"},[t._v("Administración de productos")]),r("div",{staticClass:"admin_productos-container"},[r("Options",{staticClass:"admin_productos-options",attrs:{itemtype:t.itemTypeSelected},on:{"reload-page":function(e){return t.reloadPage()}}}),r("Short",{staticClass:"admin_productos-products",on:{itemtype:function(e){t.itemTypeSelected=e}}})],1)])},o=[],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",[r("ul",{staticClass:"options btn-group-vertical"},[r("router-link",{staticClass:"button",attrs:{to:"/registro_producto",tag:"button"}},[t._v("Registro de Producto ")]),"promotions"==t.itemtype?r("router-link",{staticClass:"button",attrs:{to:"/editar_promocion",tag:"button",disabled:-1==t.$store.state.idSelected[0]}},[t._v(" Editar promoción ")]):t._e(),"products"==t.itemtype?r("router-link",{staticClass:"button",attrs:{to:"/registro_promocion",tag:"button",disabled:t.canAddToProm}},[t._v(" "+t._s(t.buttons[1].name)+" ")]):t._e(),r("router-link",{staticClass:"button",attrs:{to:"",tag:"button",disabled:-1==t.$store.state.idSelected[0]}},[t._v(" "+t._s(t.buttons[0].name)+" ")]),r("button",{staticClass:"button",attrs:{disabled:t.canAddToProm},on:{click:t.hayCantidad}},[t._v(" Aplicar descuento ")]),r("button",{staticClass:"button",attrs:{disabled:!t.isProduct},on:{click:function(e){return t.handlerDelete()}}},[t._v(" Eliminar Producto ")]),r("button",{staticClass:"button",attrs:{disabled:t.canDeleteProm},on:{click:t.eliminarProm}},[t._v(" Eliminar Promocion ")]),r("router-link",{staticClass:"button",attrs:{to:"/product-category",tag:"button"}},[t._v(" Administrar categorías ")])],1)])},i=[],c=(r("99af"),r("13d5"),r("96cf"),r("1da1")),s={name:"Options",props:["itemtype"],data:function(){return{buttons:[{name:"Editar producto"},{name:"Crear promocion"}]}},mounted:function(){this.$store.commit("changeSelection",[-1,0])},computed:{canAddToProm:function(){return-1!=this.$store.state.idSelected[0]&&("promotions"==this.itemtype||null==this.$store.state.idSelected[1])},canDeleteProm:function(){return-1==this.$store.state.idSelected[0]||("products"==this.tipo||null==this.$store.state.idSelected[1])},isProduct:function(){return-1!=this.$store.state.idSelected[0]&&"products"===this.itemtype}},methods:{hayCantidad:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.$store.state.idSelected[0],-1!=r?t.$router.push("/descuento_producto/".concat(r)):alert("Seleccione un producto");case 2:case"end":return e.stop()}}),e)})))()},eliminarProm:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.$store.state.idSelected[0],-1==r){e.next=12;break}if(n=confirm("Esta seguro que desea eliminar esta promocion"),1!=n){e.next=9;break}return e.next=6,t.$http.delete("promotions/".concat(r));case 6:alert("La promocion fue eliminada"),e.next=10;break;case 9:alert("Se Cancelo la eliminacion");case 10:e.next=13;break;case 12:alert("Seleccione una promocion");case 13:case"end":return e.stop()}}),e)})))()},obtenerCantidad:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("products/".concat(t));case 2:return n=r.sent,r.abrupt("return",n.data.datos[0].cantidad);case 4:case"end":return r.stop()}}),r)})))()},handlerDelete:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.idSelected[0],e.next=3,t.getPromotions(r);case 3:return n=e.sent,e.next=6,t.getDiscount(r);case 6:if(e.t0=e.sent.length,0==e.t0){e.next=11;break}e.t1=!0,e.next=12;break;case 11:e.t1=!1;case 12:if(o=e.t1,a=0!=n.length?t.renderPromotions(n):"",!confirm(t.getFormatedMessage(o,a))){e.next=18;break}return e.next=17,t.deleteProduct(r);case 17:t.$emit("reload-page");case 18:case"end":return e.stop()}}),e)})))()},deleteProduct:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.delete("products/".concat(t));case 2:case"end":return r.stop()}}),r)})))()},getDiscount:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("discounts/".concat(t));case 2:return r.abrupt("return",r.sent.data.datos);case 3:case"end":return r.stop()}}),r)})))()},getPromotions:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.$http.get("products/promotions/".concat(t));case 2:return r.abrupt("return",r.sent.data.datos);case 3:case"end":return r.stop()}}),r)})))()},renderPromotions:function(t){return t.reduce((function(t,e){return"".concat(t," ").concat(e.nombr_prom)}),"")},getFormatedMessage:function(t,e){var r="¿Estas seguro de quieres eliminarlo?";return t&&e?"Este producto tiene registrado un descuento y esta en las promociones de".concat(e,". ").concat(r):t?"Este producto tiene un descuento. ".concat(r):e?"Este producto tiene registrado las promociones de".concat(e,". ").concat(r):r}}},u=s,d=(r("9e4a"),r("2877")),l=Object(d["a"])(u,a,i,!1,null,"8d0a89b0",null),p=l.exports,m=r("3a26"),f={name:"Admin_productos",components:{Options:p,Short:m["a"]},data:function(){return{itemTypeSelected:""}},methods:{reloadPage:function(){location.reload()}}},b=f,h=(r("bf7b"),Object(d["a"])(b,n,o,!1,null,"0bd86413",null));e["default"]=h.exports},bf7b:function(t,e,r){"use strict";var n=r("0716"),o=r.n(n);o.a},d58f:function(t,e,r){var n=r("1c0b"),o=r("7b0b"),a=r("44ad"),i=r("50c4"),c=function(t){return function(e,r,c,s){n(r);var u=o(e),d=a(u),l=i(u.length),p=t?l-1:0,m=t?-1:1;if(c<2)while(1){if(p in d){s=d[p],p+=m;break}if(p+=m,t?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:l>p;p+=m)p in d&&(s=r(s,d[p],p,u));return s}};t.exports={left:c(!1),right:c(!0)}}}]);
//# sourceMappingURL=chunk-e095c9e6.0f20d07b.js.map